```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TitanShop - –ú–∞–≥–∞–∑–∏–Ω —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–π —Ñ–∞—Ä–º–∞–∫–æ–ª–æ–≥–∏–∏</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-color: #0f0f0f; --card-bg: #1a1a1a; --primary: #00d4ff;
            --primary-hover: #00b8e6; --text-primary: #ffffff; --text-secondary: #a0a0a0;
            --border: #2a2a2a; --success: #00ff88; --danger: #ff3b3b; --warning: #ffaa00;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: var(--bg-color); color: var(--text-primary); padding: 0; margin: 0; overflow-x: hidden;
        }
        .header { position: sticky; top: 0; background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
            padding: 16px 20px; border-bottom: 1px solid var(--border); z-index: 100; backdrop-filter: blur(10px); }
        .header-content { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; }
        .logo { font-size: 24px; font-weight: bold; background: linear-gradient(135deg, var(--primary), #00ff88);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; display: flex; align-items: center; gap: 8px; }
        .header-btns { display: flex; gap: 12px; }
        .cart-btn, .admin-btn { position: relative; background: var(--card-bg); border: 1px solid var(--primary);
            padding: 10px 20px; border-radius: 20px; color: var(--text-primary); cursor: pointer; font-size: 16px;
            display: flex; align-items: center; gap: 8px; transition: all 0.3s ease; }
        .admin-btn { border-color: var(--warning); }
        .cart-btn:hover, .admin-btn:hover { background: var(--primary); transform: scale(1.05); }
        .admin-btn:hover { background: var(--warning); color: #000; }
        .cart-badge { position: absolute; top: -8px; right: -8px; background: var(--danger); color: white;
            border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center;
            justify-content: center; font-size: 12px; font-weight: bold; }
        .categories { display: flex; gap: 12px; padding: 20px; overflow-x: auto; scrollbar-width: none;
            max-width: 1200px; margin: 0 auto; }
        .categories::-webkit-scrollbar { display: none; }
        .category-btn { padding: 12px 24px; background: var(--card-bg); border: 1px solid var(--border);
            border-radius: 25px; color: var(--text-primary); cursor: pointer; white-space: nowrap;
            transition: all 0.3s ease; font-size: 14px; }
        .category-btn:hover, .category-btn.active { background: var(--primary); border-color: var(--primary);
            transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3); }
        .search-container { padding: 0 20px 20px; max-width: 1200px; margin: 0 auto; }
        .search-input { width: 100%; padding: 14px 20px; background: var(--card-bg); border: 1px solid var(--border);
            border-radius: 25px; color: var(--text-primary); font-size: 16px; transition: all 0.3s ease; }
        .search-input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 20px rgba(0, 212, 255, 0.2); }
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px; padding: 20px; max-width: 1200px; margin: 0 auto; }
        .product-card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 16px;
            overflow: hidden; transition: all 0.3s ease; cursor: pointer; position: relative; }
        .product-card:hover { transform: translateY(-8px); box-shadow: 0 12px 24px rgba(0, 212, 255, 0.2);
            border-color: var(--primary); }
        .product-image { width: 100%; height: 280px; object-fit: cover;
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a); display: block; }
        .product-image-placeholder { width: 100%; height: 280px; background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            display: flex; align-items: center; justify-content: center; font-size: 48px; color: var(--text-secondary); }
        .product-info { padding: 16px; }
        .product-category { font-size: 12px; color: var(--primary); text-transform: uppercase;
            letter-spacing: 1px; margin-bottom: 8px; }
        .product-name { font-size: 18px; font-weight: bold; margin-bottom: 8px; overflow: hidden;
            text-overflow: ellipsis; white-space: nowrap; }
        .product-description { font-size: 14px; color: var(--text-secondary); margin-bottom: 12px;
            overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2;
            -webkit-box-orient: vertical; line-height: 1.4; }
        .product-footer { display: flex; justify-content: space-between; align-items: center;
            padding-top: 12px; border-top: 1px solid var(--border); }
        .product-price { font-size: 24px; font-weight: bold; color: var(--success); }
        .add-to-cart-btn { background: var(--primary); border: none; padding: 10px 20px;
            border-radius: 20px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s ease; }
        .add-to-cart-btn:hover { background: var(--primary-hover); transform: scale(1.05); }
        .add-to-cart-btn:disabled { background: var(--text-secondary); cursor: not-allowed; transform: none; }
        .stock-badge { position: absolute; top: 12px; right: 12px; padding: 6px 12px;
            border-radius: 12px; font-size: 12px; font-weight: bold; }
        .in-stock { background: var(--success); color: #000; }
        .out-of-stock { background: var(--danger); color: white; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.9); z-index: 1000; overflow-y: auto; }
        .modal.active { display: flex; align-items: flex-start; justify-content: center; padding: 20px; }
        .modal-content { background: var(--card-bg); border-radius: 20px; max-width: 600px; width: 100%;
            margin: 20px auto; border: 1px solid var(--border); animation: slideUp 0.3s ease; }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .modal-header { padding: 20px; border-bottom: 1px solid var(--border); display: flex;
            justify-content: space-between; align-items: center; }
        .modal-title { font-size: 24px; font-weight: bold; }
        .close-btn { background: none; border: none; color: var(--text-primary); font-size: 28px;
            cursor: pointer; width: 40px; height: 40px; display: flex; align-items: center;
            justify-content: center; border-radius: 50%; transition: all 0.3s ease; }
        .close-btn:hover { background: var(--danger); }
        .modal-body { padding: 20px; max-height: 70vh; overflow-y: auto; }
        .cart-item { display: flex; gap: 16px; padding: 16px; background: var(--bg-color);
            border-radius: 12px; margin-bottom: 12px; border: 1px solid var(--border); }
        .cart-item-image { width: 80px; height: 80px; object-fit: cover; border-radius: 8px; background: var(--card-bg); }
        .cart-item-info { flex: 1; }
        .cart-item-name { font-weight: bold; margin-bottom: 4px; }
        .cart-item-price { color: var(--success); font-size: 18px; }
        .cart-item-controls { display: flex; align-items: center; gap: 12px; margin-top: 8px; }
        .qty-btn { background: var(--primary); border: none; width: 32px; height: 32px;
            border-radius: 50%; color: white; font-size: 18px; cursor: pointer; transition: all 0.3s ease; }
        .qty-btn:hover { background: var(--primary-hover); transform: scale(1.1); }
        .qty-display { font-size: 18px; font-weight: bold; min-width: 30px; text-align: center; }
        .remove-btn { background: var(--danger); border: none; padding: 8px 16px;
            border-radius: 8px; color: white; cursor: pointer; margin-left: auto; }
        .cart-total { padding: 20px; border-top: 1px solid var(--border); background: var(--bg-color);
            border-radius: 0 0 20px 20px; }
        .total-row { display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 16px; }
        .total-row.final { font-size: 24px; font-weight: bold; color: var(--success);
            padding-top: 12px; border-top: 2px solid var(--border); }
        .checkout-btn { width: 100%; padding: 16px; background: linear-gradient(135deg, var(--primary), var(--success));
            border: none; border-radius: 12px; color: white; font-size: 18px; font-weight: bold;
            cursor: pointer; margin-top: 16px; transition: all 0.3s ease; }
        .checkout-btn:hover { transform: scale(1.02); box-shadow: 0 8px 20px rgba(0, 212, 255, 0.4); }
        .empty-state { text-align: center; padding: 60px 20px; color: var(--text-secondary); }
        .empty-state-icon { font-size: 64px; margin-bottom: 16px; opacity: 0.5; }
        .loading { text-align: center; padding: 40px; font-size: 18px; color: var(--text-secondary); }
        
        /* Admin Panel Styles */
        .admin-container { padding: 20px; max-width: 1200px; margin: 0 auto; }
        .admin-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; 
            flex-wrap: wrap; gap: 16px; }
        .admin-title { font-size: 28px; font-weight: bold; }
        .btn-primary { background: var(--primary); border: none; padding: 12px 24px; border-radius: 12px;
            color: white; font-weight: bold; cursor: pointer; transition: all 0.3s ease; }
        .btn-primary:hover { background: var(--primary-hover); transform: scale(1.05); }
        .btn-success { background: var(--success); color: #000; }
        .btn-danger { background: var(--danger); color: white; }
        .admin-table { width: 100%; background: var(--card-bg); border-radius: 12px; overflow: hidden;
            border: 1px solid var(--border); }
        .admin-table th { background: var(--bg-color); padding: 16px; text-align: left;
            border-bottom: 1px solid var(--border); font-weight: bold; }
        .admin-table td { padding: 16px; border-bottom: 1px solid var(--border); }
        .admin-table tr:last-child td { border-bottom: none; }
        .admin-table tr:hover { background: var(--bg-color); }
        .action-btns { display: flex; gap: 8px; flex-wrap: wrap; }
        .btn-small { padding: 6px 12px; font-size: 14px; border-radius: 8px; border: none;
            cursor: pointer; transition: all 0.3s ease; }
        .btn-edit { background: var(--primary); color: white; }
        .btn-delete { background: var(--danger); color: white; }
        .form-group { margin-bottom: 16px; }
        .form-label { display: block; margin-bottom: 8px; font-weight: bold; }
        .form-input, .form-textarea, .form-select { width: 100%; padding: 12px; background: var(--bg-color);
            border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);
            font-size: 16px; transition: all 0.3s ease; font-family: inherit; }
        .form-input:focus, .form-textarea:focus, .form-select:focus { outline: none;
            border-color: var(--primary); box-shadow: 0 0 10px rgba(0, 212, 255, 0.2); }
        .form-textarea { min-height: 100px; resize: vertical; }
        .form-checkbox { width: auto; margin-right: 8px; }
        .form-row { display: flex; gap: 16px; }
        .form-row .form-group { flex: 1; }
        .auth-container { max-width: 400px; margin: 100px auto; padding: 40px;
            background: var(--card-bg); border-radius: 20px; border: 1px solid var(--border); }
        .auth-title { font-size: 28px; font-weight: bold; text-align: center; margin-bottom: 32px; }
        .product-img-preview { width: 80px; height: 80px; object-fit: cover; border-radius: 8px; }
        .image-upload-area { border: 2px dashed var(--border); border-radius: 12px; padding: 40px;
            text-align: center; cursor: pointer; transition: all 0.3s ease; margin-bottom: 16px; }
        .image-upload-area:hover { border-color: var(--primary); background: var(--bg-color); }
        .image-preview { max-width: 100%; max-height: 300px; border-radius: 12px; margin-top: 16px; }
        .contact-form { background: var(--bg-color); padding: 20px; border-radius: 12px; margin-top: 16px; }
        .radio-group { display: flex; gap: 16px; margin-bottom: 16px; flex-wrap: wrap; }
        .radio-label { display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px 16px;
            background: var(--card-bg); border: 1px solid var(--border); border-radius: 8px; transition: all 0.3s ease; }
        .radio-label:hover { border-color: var(--primary); }
        .radio-label input[type="radio"]:checked + span { color: var(--primary); font-weight: bold; }
        
        @media (max-width: 768px) {
            .form-row { flex-direction: column; }
            .header-btns { gap: 8px; }
            .cart-btn, .admin-btn { padding: 8px 16px; font-size: 14px; }
            .products-grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); }
        }
    </style>
</head>
<body>
    <!-- User View -->
    <div id="userView">
        <div class="header">
            <div class="header-content">
                <div class="logo">üèãÔ∏è TitanShop</div>
                <div class="header-btns">
                    <button class="admin-btn" onclick="showAdminAuth()">‚öôÔ∏è –ê–¥–º–∏–Ω</button>
                    <button class="cart-btn" onclick="openCart()">
                        üõí –ö–æ—Ä–∑–∏–Ω–∞
                        <span class="cart-badge" id="cartBadge">0</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="search-container">
            <input type="text" class="search-input" placeholder="üîé –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..." id="searchInput">
        </div>

        <div class="categories" id="categories">
            <button class="category-btn active" onclick="filterCategory('all', this)">–í—Å–µ —Ç–æ–≤–∞—Ä—ã</button>
            <button class="category-btn" onclick="filterCategory('inject', this)">üíâ –ò–Ω—ä–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ</button>
            <button class="category-btn" onclick="filterCategory('oral', this)">üíä –û—Ä–∞–ª—å–Ω—ã–µ</button>
        </div>

        <div class="products-grid" id="productsGrid">
            <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤...</div>
        </div>
    </div>

    <!-- Admin View -->
    <div id="adminView" style="display: none;">
        <div class="header">
            <div class="header-content">
                <div class="logo">‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</div>
                <button class="admin-btn" onclick="exitAdmin()">‚Üê –í—ã—Ö–æ–¥</button>
            </div>
        </div>

        <div class="admin-container">
            <div class="admin-header">
                <div class="admin-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏</div>
                <button class="btn-primary" onclick="showAddProductModal()">+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
            </div>

            <div style="overflow-x: auto;">
                <table class="admin-table" id="adminTable">
                    <thead>
                        <tr>
                            <th>–§–æ—Ç–æ</th>
                            <th>ID</th>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                            <th>–¶–µ–Ω–∞ (‚Ç¨)</th>
                            <th>–í –Ω–∞–ª–∏—á–∏–∏</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="adminTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="auth-container">
            <div class="auth-title">üîê –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</div>
            <div class="form-group">
                <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
                <input type="password" class="form-input" id="adminPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
            </div>
            <button class="btn-primary" style="width: 100%;" onclick="checkAdminPassword()">–í–æ–π—Ç–∏</button>
            <button class="btn-danger" style="width: 100%; margin-top: 12px;" onclick="closeAuthModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- Cart Modal -->
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üõí –ö–æ—Ä–∑–∏–Ω–∞</div>
                <button class="close-btn" onclick="closeCart()">√ó</button>
            </div>
            <div class="modal-body" id="cartItems"></div>
        </div>
    </div>

    <!-- Contact Form Modal -->
    <div class="modal" id="contactModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">üìû –ö–∞–∫ —Å –≤–∞–º–∏ —Å–≤—è–∑–∞—Ç—å—Å—è?</div>
                <button class="close-btn" onclick="closeContactModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="contact-form">
                    <div class="form-group">
                        <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± —Å–≤—è–∑–∏:</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="contactMethod" value="telegram" checked>
                                <span>üì± Telegram</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="contactMethod" value="whatsapp">
                                <span>üíö WhatsApp</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="contactMethod" value="phone">
                                <span>üìû –¢–µ–ª–µ—Ñ–æ–Ω</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–í–∞—à –∫–æ–Ω—Ç–∞–∫—Ç:</label>
                        <input type="text" class="form-input" id="contactValue" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ username" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                        <textarea class="form-textarea" id="orderComment" 
                                  placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ—Å–ª–µ 18:00"></textarea>
                    </div>
                    
                    <button class="btn-primary" style="width: 100%;" onclick="submitOrder()">
                        ‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Detail Modal -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="productModalTitle"></div>
                <button class="close-btn" onclick="closeProductDetail()">√ó</button>
            </div>
            <div class="modal-body" id="productModalBody"></div>
        </div>
    </div>

    <!-- Edit Product Modal -->
    <div class="modal" id="editProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="editModalTitle">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä</div>
                <button class="close-btn" onclick="closeEditModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="productForm">
                    <input type="hidden" id="editProductId">
                    
                    <div class="form-group">
                        <label class="form-label">–§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞</label>
                        <div class="image-upload-area" onclick="document.getElementById('imageInput').click()">
                            <div>üì∏ –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                                –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 800x800px, –¥–æ 2MB
                            </div>
                        </div>
                        <input type="file" id="imageInput" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
                        <img id="imagePreview" class="image-preview" style="display: none;">
                        <input type="hidden" id="editImage">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</label>
                            <input type="text" class="form-input" id="editName" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                            <select class="form-select" id="editCategory" required>
                                <option value="–û—Ä–∞–ª—å–Ω—ã–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã">üíä –û—Ä–∞–ª—å–Ω—ã–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã</option>
                                <option value="–ò–Ω—ä–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã">üíâ –ò–Ω—ä–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">–¶–µ–Ω–∞ (‚Ç¨)</label>
                            <input type="number" class="form-input" id="editPrice" step="0.01" required>
                        </div>
                        <div class="form-group" style="display: flex; align-items: center; padding-top: 30px;">
                            <label>
                                <input type="checkbox" class="form-checkbox" id="editInStock">
                                <span class="form-label" style="display: inline;">–í –Ω–∞–ª–∏—á–∏–∏</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea class="form-textarea" id="editDescription" required></textarea>
                    </div>
                    
                    <button type="submit" class="btn-primary" style="width: 100%;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // ==================== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ====================
        // –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–ò –ó–ù–ê–ß–ï–ù–ò–Ø –ù–ê –°–í–û–ò!
        const API_URL = 'https://titanshop-backend-production.up.railway.app/'; // –ó–ê–ú–ï–ù–ò–¢–ï –Ω–∞ –≤–∞—à—É Railway —Å—Å—ã–ª–∫—É
        const TELEGRAM_BOT_TOKEN = '8583050907:AAEZK40DxOJP_e944TwxrT5tIeCLul4jyu4'; // –ó–ê–ú–ï–ù–ò–¢–ï –Ω–∞ —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
        const TELEGRAM_CHAT_ID = '-1003294669419'; // –í–∞—à —á–∞—Ç ID (—É–∂–µ —É–∫–∞–∑–∞–Ω)
        const ADMIN_PASSWORD = 'admin123'; // –ò–ó–ú–ï–ù–ò–¢–ï –ø–∞—Ä–æ–ª—å –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏!

        // ==================== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ====================
        const tg = window.Telegram?.WebApp || {
            ready: () => {}, expand: () => {}, close: () => {},
            sendData: (data) => console.log('Mock sendData:', data),
            showPopup: (params) => alert(params.message || 'Notification'),
            HapticFeedback: { impactOccurred: () => {} }
        };
        tg.ready();
        tg.expand();

        let products = [];
        let cart = {};
        let currentFilter = 'all';
        let isAdmin = false;
        let currentImageBase64 = '';

        // ==================== API –§–£–ù–ö–¶–ò–ò ====================
        async function apiRequest(endpoint, method = 'GET', data = null) {
            try {
                const options = {
                    method,
                    headers: { 'Content-Type': 'application/json' }
                };
                if (data) options.body = JSON.stringify(data);
                
                const response = await fetch(`${API_URL}${endpoint}`, options);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                return await response.json();
            } catch (error) {
                console.error('API Error:', error);
                // Fallback to localStorage if API fails
                return null;
            }
        }

        async function loadProducts() {
            const data = await apiRequest('/api/products');
            if (data && data.products) {
                products = data.products;
            } else {
                // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ localStorage –∫–∞–∫ fallback
                const stored = localStorage.getItem('products');
                if (stored) {
                    products = JSON.parse(stored);
                } else {
                    // –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
                    products = [
                        {
                            id: '1',
                            name: 'Clomiphene Citrate 25mg',
                            category: '–û—Ä–∞–ª—å–Ω—ã–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã',
                            price: 33.00,
                            description: '–ö–ª–æ–º–∏—Ñ–µ–Ω–∞ —Ü–∏—Ç—Ä–∞—Ç (–ö–ª–æ–º–∏–¥) ‚Äî –≥–ª–∞–≤–Ω—ã–π –ø—Ä–µ–ø–∞—Ä–∞—Ç –¥–ª—è –ü–ö–¢.',
                            image: '',
                            inStock: true
                        },
                        {
                            id: '2',
                            name: 'Clenbuterol 40mcg',
                            category: '–û—Ä–∞–ª—å–Ω—ã–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã',
                            price: 27.00,
                            description: '–ö–ª–µ–Ω–±—É—Ç–µ—Ä–æ–ª ‚Äî –º–æ—â–Ω—ã–π –∂–∏—Ä–æ—Å–∂–∏–≥–∞—Ç–µ–ª—å.',
                            image: '',
                            inStock: true
                        }
                    ];
                }
            }
            renderProducts();
        }

        async function saveProducts() {
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            await apiRequest('/api/products', 'POST', { products });
            // –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ localStorage
            localStorage.setItem('products', JSON.stringify(products));
        }

        async function sendTelegramNotification(message) {
            const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CHAT_ID,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });
                return await response.json();
            } catch (error) {
                console.error('Telegram Error:', error);
                return null;
            }
        }

        // ==================== –ö–û–†–ó–ò–ù–ê ====================
        function openCart() {
            const cartItemsDiv = document.getElementById('cartItems');
            if (Object.keys(cart).length === 0) {
                cartItemsDiv.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üõçÔ∏è</div>
                        <div>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã!</div>
                    </div>
                    <div class="cart-total">
                        <div class="total-row final">
                            <span>–ò—Ç–æ–≥–æ:</span>
                            <span>‚Ç¨0.00</span>
                        </div>
                    </div>`;
                document.getElementById('cartModal').classList.add('active');
                return;
            }

            let total = 0;
            let itemsHtml = '';

            for (const id in cart) {
                const product = products.find(p => p.id === id);
                if (!product) continue;

                const quantity = cart[id];
                const itemTotal = quantity * product.price;
                total += itemTotal;

                itemsHtml += `
                    <div class="cart-item">
                        ${product.image ? 
                            `<img src="${product.image}" alt="${product.name}" class="cart-item-image">` : 
                            `<div class="cart-item-image" style="display: flex; align-items: center; justify-content: center; font-size: 30px;">üíä</div>`
                        }
                        <div class="cart-item-info">
                            <div class="cart-item-name">${product.name}</div>
                            <div class="cart-item-price">‚Ç¨${itemTotal.toFixed(2)}</div>
                            <div class="cart-item-controls">
                                <button class="qty-btn" onclick="updateQuantity('${id}', -1)">-</button>
                                <span class="qty-display">${quantity}</span>
                                <button class="qty-btn" onclick="updateQuantity('${id}', 1)">+</button>
                                <button class="remove-btn" onclick="updateQuantity('${id}', -${quantity})">–£–¥–∞–ª–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>`;
            }

            cartItemsDiv.innerHTML = itemsHtml + `
                <div class="cart-total">
                    <div class="total-row">
                        <span>–¢–æ–≤–∞—Ä—ã:</span>
                        <span>‚Ç¨${total.toFixed(2)}</span>
                    </div>
                    <div class="total-row final">
                        <span>–ò—Ç–æ–≥–æ:</span>
                        <span>‚Ç¨${total.toFixed(2)}</span>
                    </div>
                    <button class="checkout-btn" onclick="showContactForm()">
                        üìù –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ (‚Ç¨${total.toFixed(2)})
                    </button>
                </div>`;
            document.getElementById('cartModal').classList.add('active');
        }

        function closeCart() {
            document.getElementById('cartModal').classList.remove('active');
        }

        function updateQuantity(id, change) {
            cart[id] = (cart[id] || 0) + change;
            if (cart[id] <= 0) {
                delete cart[id];
            }
            tg.HapticFeedback.impactOccurred('light');
            updateCartBadge();
            openCart();
        }

        function updateCartBadge() {
            const count = Object.values(cart).reduce((a, b) => a + b, 0);
            const badge = document.getElementById('cartBadge');
            badge.textContent = count;
            badge.style.display = count > 0 ? 'flex' : 'none';
        }

        function addToCart(id) {
            const product = products.find(p => p.id === id);
            if (!product || !product.inStock) return;
            cart[id] = (cart[id] || 0) + 1;
            updateCartBadge();
            tg.HapticFeedback.impactOccurred('medium');
            tg.showPopup({ 
                title: '‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ', 
                message: `${product.name} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É`,
                buttons: [{type: 'ok'}]
            });
        }

        // ==================== –§–û–†–ú–ê –ö–û–ù–¢–ê–ö–¢–û–í ====================
        function showContactForm() {
            closeCart();
            document.getElementById('contactModal').classList.add('active');
        }

        function closeContactModal() {
            document.getElementById('contactModal').classList.remove('active');
        }

        async function submitOrder() {
            const contactMethod = document.querySelector('input[name="contactMethod"]:checked').value;
            const contactValue = document.getElementById('contactValue').value.trim();
            const orderComment = document.getElementById('orderComment').value.trim();

            if (!contactValue) {
                alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç –¥–ª—è —Å–≤—è–∑–∏!');
                return;
            }

            // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
            let message = 'üõí *–ù–û–í–´–ô –ó–ê–ö–ê–ó TITANSHOP* üõí\n\n';
            
            let total = 0;
            for (const id in cart) {
                const product = products.find(p => p.id === id);
                if (!product) continue;
                const quantity = cart[id];
                const itemTotal = quantity * product.price;
                total += itemTotal;
                message += `‚ñ™Ô∏è *${product.name}*\n   –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${quantity} —à—Ç.\n   –¶–µ–Ω–∞: ‚Ç¨${itemTotal.toFixed(2)}\n\n`;
            }

            message += `üí∞ *–ò–¢–û–ì–û: ‚Ç¨${total.toFixed(2)}*\n\n`;
            message += `üìû *–ö–æ–Ω—Ç–∞–∫—Ç:*\n`;
            
            if (contactMethod === 'telegram') {
                message += `Telegram: ${contactValue}\n`;
            } else if (contactMethod === 'whatsapp') {
                message += `WhatsApp: ${contactValue}\n`;
            } else {
                message += `–¢–µ–ª–µ—Ñ–æ–Ω: ${contactValue}\n`;
            }

            if (orderComment) {
                message += `\nüí¨ *–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:* ${orderComment}`;
            }

            // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
            const result = await sendTelegramNotification(message);

            if (result && result.ok) {
                tg.HapticFeedback.impactOccurred('heavy');
                alert('‚úÖ –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.');
                
                // –û—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –∏ —Ñ–æ—Ä–º—ã
                cart = {};
                updateCartBadge();
                closeContactModal();
                document.getElementById('contactValue').value = '';
                document.getElementById('orderComment').value = '';
            } else {
                alert('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å –Ω–∞–ø—Ä—è–º—É—é.');
            }
        }

        // ==================== –¢–û–í–ê–†–´ ====================
        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput ? searchInput.value.toLowerCase() : '';
            
            let filtered = products.filter(p => {
                const matchesSearch = p.name.toLowerCase().includes(searchTerm) || 
                                     p.description.toLowerCase().includes(searchTerm);
                const matchesCategory = currentFilter === 'all' || 
                    (currentFilter === 'inject' && p.category.includes('–ò–Ω—ä–µ–∫—Ü')) ||
                    (currentFilter === 'oral' && p.category.includes('–û—Ä–∞–ª—å'));
                return matchesSearch && matchesCategory;
            });

            if (filtered.length === 0) {
                grid.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üîç</div><div>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div></div>';
                return;
            }

            grid.innerHTML = filtered.map(p => `
                <div class="product-card" onclick="showProductDetail('${p.id}')">
                    <span class="stock-badge ${p.inStock ? 'in-stock' : 'out-of-stock'}">
                        ${p.inStock ? '‚úÖ –í –Ω–∞–ª–∏—á–∏–∏' : '‚ùå –ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏'}
                    </span>
                    ${p.image ? 
                        `<img src="${p.image}" alt="${p.name}" class="product-image">` : 
                        `<div class="product-image-placeholder">üíä</div>`
                    }
                    <div class="product-info">
                        <div class="product-category">${p.category}</div>
                        <div class="product-name">${p.name}</div>
                        <div class="product-description">${p.description}</div>
                        <div class="product-footer">
                            <div class="product-price">‚Ç¨${p.price.toFixed(2)}</div>
                            <button class="add-to-cart-btn" 
                                onclick="event.stopPropagation(); addToCart('${p.id}')" 
                                ${!p.inStock ? 'disabled' : ''}>
                                ${p.inStock ? 'üõí –í –∫–æ—Ä–∑–∏–Ω—É' : '–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏'}
                            </button>
                        </div>
                    </div>
                </div>`
            ).join('');
        }

        function showProductDetail(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;
            
            document.getElementById('productModalTitle').textContent = product.name;
            document.getElementById('productModalBody').innerHTML = `
                ${product.image ? 
                    `<img src="${product.image}" alt="${product.name}" style="width: 100%; height: 400px; object-fit: cover; border-radius: 12px;">` : 
                    `<div class="product-image-placeholder" style="height: 400px;">üíä</div>`
                }
                <div style="padding: 24px 0;">
                    <div style="color: var(--primary); font-size: 14px; text-transform: uppercase; margin-bottom: 8px;">${product.category}</div>
                    <div style="font-size: 28px; font-weight: bold; margin-bottom: 16px;">${product.name}</div>
                    <div style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 24px;">${product.description}</div>
                    <div style="display: flex; justify-content: space-between; align-items: center; padding-top: 20px; border-top: 1px solid var(--border);">
                        <div style="font-size: 32px; font-weight: bold; color: var(--success);">‚Ç¨${product.price.toFixed(2)}</div>
                        <button class="add-to-cart-btn" onclick="addToCart('${product.id}'); closeProductDetail();" ${!product.inStock ? 'disabled' : ''}>
                            ${product.inStock ? 'üõí –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É' : '‚ùå –ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏'}
                        </button>
                    </div>
                </div>`;
            document.getElementById('productModal').classList.add('active');
        }

        function closeProductDetail() {
            document.getElementById('productModal').classList.remove('active');
        }

        function filterCategory(category, element) {
            currentFilter = category;
            document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
            if (element) element.classList.add('active');
            renderProducts();
        }

        // ==================== –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ ====================
        function showAdminAuth() {
            document.getElementById('adminPassword').value = '';
            document.getElementById('authModal').classList.add('active');
        }

        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
        }

        function checkAdminPassword() {
            const password = document.getElementById('adminPassword').value;
            if (password === ADMIN_PASSWORD) {
                isAdmin = true;
                closeAuthModal();
                showAdminPanel();
            } else {
                alert('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!');
            }
        }

        function showAdminPanel() {
            document.getElementById('userView').style.display = 'none';
            document.getElementById('adminView').style.display = 'block';
            renderAdminTable();
        }

        function exitAdmin() {
            isAdmin = false;
            document.getElementById('userView').style.display = 'block';
            document.getElementById('adminView').style.display = 'none';
        }

        function renderAdminTable() {
            const tbody = document.getElementById('adminTableBody');
            tbody.innerHTML = products.map(p => `
                <tr>
                    <td>
                        ${p.image ? 
                            `<img src="${p.image}" class="product-img-preview">` : 
                            '<div style="width: 80px; height: 80px; background: var(--bg-color); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 32px;">üíä</div>'
                        }
                    </td>
                    <td>${p.id}</td>
                    <td>${p.name}</td>
                    <td>${p.category}</td>
                    <td>‚Ç¨${p.price.toFixed(2)}</td>
                    <td>${p.inStock ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç'}</td>
                    <td>
                        <div class="action-btns">
                            <button class="btn-small btn-edit" onclick="editProduct('${p.id}')">‚úèÔ∏è</button>
                            <button class="btn-small btn-delete" onclick="deleteProduct('${p.id}')">üóëÔ∏è</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function showAddProductModal() {
            document.getElementById('editModalTitle').textContent = '–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä';
            document.getElementById('editProductId').value = '';
            document.getElementById('editName').value = '';
            document.getElementById('editCategory').value = '–û—Ä–∞–ª—å–Ω—ã–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã';
            document.getElementById('editPrice').value = '';
            document.getElementById('editDescription').value = '';
            document.getElementById('editImage').value = '';
            document.getElementById('editInStock').checked = true;
            document.getElementById('imagePreview').style.display = 'none';
            currentImageBase64 = '';
            document.getElementById('editProductModal').classList.add('active');
        }

        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;

            document.getElementById('editModalTitle').textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä';
            document.getElementById('editProductId').value = product.id;
            document.getElementById('editName').value = product.name;
            document.getElementById('editCategory').value = product.category;
            document.getElementById('editPrice').value = product.price;
            document.getElementById('editDescription').value = product.description;
            document.getElementById('editImage').value = product.image;
            document.getElementById('editInStock').checked = product.inStock;
            
            if (product.image) {
                document.getElementById('imagePreview').src = product.image;
                document.getElementById('imagePreview').style.display = 'block';
                currentImageBase64 = product.image;
            } else {
                document.getElementById('imagePreview').style.display = 'none';
                currentImageBase64 = '';
            }
            
            document.getElementById('editProductModal').classList.add('active');
        }

        function closeEditModal() {
            document.getElementById('editProductModal').classList.remove('active');
        }

        async function deleteProduct(id) {
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä?')) return;
            
            products = products.filter(p => p.id !== id);
            await saveProducts();
            renderAdminTable();
            renderProducts();
            tg.HapticFeedback.impactOccurred('medium');
            alert('‚úÖ –¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω!');
        }

        // ==================== –ó–ê–ì–†–£–ó–ö–ê –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô ====================
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ (–º–∞–∫—Å 2MB)
            if (file.size > 2 * 1024 * 1024) {
                alert('‚ùå –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π! –ú–∞–∫—Å–∏–º—É–º 2MB');
                return;
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞
            if (!file.type.startsWith('image/')) {
                alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                currentImageBase64 = e.target.result;
                document.getElementById('imagePreview').src = currentImageBase64;
                document.getElementById('imagePreview').style.display = 'block';
                document.getElementById('editImage').value = currentImageBase64;
            };
            reader.readAsDataURL(file);
        }

        // ==================== –§–û–†–ú–ê –¢–û–í–ê–†–ê ====================
        document.getElementById('productForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const id = document.getElementById('editProductId').value;
            const productData = {
                id: id || Date.now().toString(),
                name: document.getElementById('editName').value,
                category: document.getElementById('editCategory').value,
                price: parseFloat(document.getElementById('editPrice').value),
                description: document.getElementById('editDescription').value,
                image: currentImageBase64 || document.getElementById('editImage').value,
                inStock: document.getElementById('editInStock').checked
            };

            if (id) {
                const index = products.findIndex(p => p.id === id);
                if (index !== -1) {
                    products[index] = productData;
                }
            } else {
                products.push(productData);
            }

            await saveProducts();
            renderAdminTable();
            renderProducts();
            closeEditModal();
            tg.HapticFeedback.impactOccurred('medium');
            alert('‚úÖ –¢–æ–≤–∞—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
        });

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        document.addEventListener('DOMContentLoaded', () => {
            loadProducts();
            document.getElementById('searchInput').addEventListener('input', renderProducts);
            updateCartBadge();
        });
    </script>
</body>
</html>
```